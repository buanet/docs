<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.53">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="description" content="Documentation for the official ioBroker Docker image."><meta name="charset" content="UTF‑8"><meta name="robots" content="index, follow"><meta property="og:title" content="Official ioBroker Docker Image Docs"><meta property="og:description" content="Documentation for the official ioBroker Docker image."><meta property="og:url" content="https://docs.buanet.de/iobroker-docker-image/docs/"><meta property="og:image" content="https://docs.buanet.de/images/opengraph/default.png"><meta property="og:type" content="article"><meta property="og:locale" content="en_US"><title>ioBroker Docker Image Docs | docs.buanet.de</title>
    <link rel="preload" href="/assets/style.6f3fd029.css" as="style" /><link rel="stylesheet" href="/assets/style.6f3fd029.css" />
    <link rel="modulepreload" href="/assets/app.b4a1b2d2.js"><link rel="modulepreload" href="/assets/index.html.6807927f.js"><link rel="modulepreload" href="/assets/index.html.92b1ba24.js"><link rel="prefetch" href="/assets/index.html.cc842d2b.js" as="script" /><link rel="prefetch" href="/assets/index.html.e0d416fb.js" as="script" /><link rel="prefetch" href="/assets/index.html.f3bfbc8c.js" as="script" /><link rel="prefetch" href="/assets/index.html.fc7d5a83.js" as="script" /><link rel="prefetch" href="/assets/index.html.65a4bb8d.js" as="script" /><link rel="prefetch" href="/assets/index.html.4ce5f2a0.js" as="script" /><link rel="prefetch" href="/assets/index.html.4a1c7790.js" as="script" /><link rel="prefetch" href="/assets/index.html.b8381201.js" as="script" /><link rel="prefetch" href="/assets/index.html.1d10a8c3.js" as="script" /><link rel="prefetch" href="/assets/index.html.1d93a869.js" as="script" /><link rel="prefetch" href="/assets/index.html.4289410e.js" as="script" /><link rel="prefetch" href="/assets/index.html.035cf592.js" as="script" /><link rel="prefetch" href="/assets/index.html.d00e3954.js" as="script" /><link rel="prefetch" href="/assets/404.html.d2dc3323.js" as="script" /><link rel="prefetch" href="/assets/index.html.5539376b.js" as="script" /><link rel="prefetch" href="/assets/index.html.9e076375.js" as="script" /><link rel="prefetch" href="/assets/index.html.ab01ff82.js" as="script" /><link rel="prefetch" href="/assets/index.html.0c3771e8.js" as="script" /><link rel="prefetch" href="/assets/index.html.95edb33a.js" as="script" /><link rel="prefetch" href="/assets/index.html.79438731.js" as="script" /><link rel="prefetch" href="/assets/index.html.693118a6.js" as="script" /><link rel="prefetch" href="/assets/index.html.20e3a8b5.js" as="script" /><link rel="prefetch" href="/assets/index.html.d1e379f0.js" as="script" /><link rel="prefetch" href="/assets/index.html.dd17495b.js" as="script" /><link rel="prefetch" href="/assets/index.html.b236813f.js" as="script" /><link rel="prefetch" href="/assets/index.html.7a1fca80.js" as="script" /><link rel="prefetch" href="/assets/index.html.45f633ed.js" as="script" /><link rel="prefetch" href="/assets/404.html.d7978374.js" as="script" />
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">docs.buanet.de</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/about/" class="" aria-label="About me"><!--[--><!--]--> About me <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Projects"><span class="title">Projects</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Projects"><span class="title">Projects</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/iobroker-docker-image/" class="router-link-active" aria-label="ioBroker Docker Image"><!--[--><!--]--> ioBroker Docker Image <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/iobroker-raspberrypios/" class="" aria-label="ioBroker Raspberry Pi OS Image"><!--[--><!--]--> ioBroker Raspberry Pi OS Image <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Docs"><span class="title">Docs</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Docs"><span class="title">Docs</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/iobroker-docker-image/docs/" class="router-link-active router-link-exact-active router-link-active" aria-label="ioBroker Docker Image Docs"><!--[--><!--]--> ioBroker Docker Image Docs <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/iobroker-raspberrypios-image/docs/" class="" aria-label="ioBroker Raspberry Pi OS Image Docs"><!--[--><!--]--> ioBroker Raspberry Pi OS Image Docs <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Language</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Language</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/iobroker-docker-image/docs/" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/de/iobroker-docker-image/docs/" class="" aria-label="Deutsch"><!--[--><!--]--> Deutsch <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/about/" class="" aria-label="About me"><!--[--><!--]--> About me <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Projects"><span class="title">Projects</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Projects"><span class="title">Projects</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/iobroker-docker-image/" class="router-link-active" aria-label="ioBroker Docker Image"><!--[--><!--]--> ioBroker Docker Image <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/iobroker-raspberrypios/" class="" aria-label="ioBroker Raspberry Pi OS Image"><!--[--><!--]--> ioBroker Raspberry Pi OS Image <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Docs"><span class="title">Docs</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Docs"><span class="title">Docs</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/iobroker-docker-image/docs/" class="router-link-active router-link-exact-active router-link-active" aria-label="ioBroker Docker Image Docs"><!--[--><!--]--> ioBroker Docker Image Docs <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/iobroker-raspberrypios-image/docs/" class="" aria-label="ioBroker Raspberry Pi OS Image Docs"><!--[--><!--]--> ioBroker Raspberry Pi OS Image Docs <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Language</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Language</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/iobroker-docker-image/docs/" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/de/iobroker-docker-image/docs/" class="" aria-label="Deutsch"><!--[--><!--]--> Deutsch <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">ioBroker Docker Image Docs <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/iobroker-docker-image/docs/#getting-started" class="router-link-active router-link-exact-active sidebar-item" aria-label="Getting Started"><!--[--><!--]--> Getting Started <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/iobroker-docker-image/docs/#running-from-command-line" class="router-link-active router-link-exact-active sidebar-item" aria-label="Running from command-line"><!--[--><!--]--> Running from command-line <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iobroker-docker-image/docs/#running-with-docker-compose" class="router-link-active router-link-exact-active sidebar-item" aria-label="Running with docker-compose"><!--[--><!--]--> Running with docker-compose <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/iobroker-docker-image/docs/#persistent-data" class="router-link-active router-link-exact-active sidebar-item" aria-label="Persistent data"><!--[--><!--]--> Persistent data <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iobroker-docker-image/docs/#environment-variables-env" class="router-link-active router-link-exact-active sidebar-item" aria-label="Environment variables (ENV)"><!--[--><!--]--> Environment variables (ENV) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iobroker-docker-image/docs/#networks" class="router-link-active router-link-exact-active sidebar-item" aria-label="Networks"><!--[--><!--]--> Networks <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iobroker-docker-image/docs/#advanced-configuration" class="router-link-active router-link-exact-active sidebar-item" aria-label="Advanced configuration"><!--[--><!--]--> Advanced configuration <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/iobroker-docker-image/docs/#mounting-usb-devices" class="router-link-active router-link-exact-active sidebar-item" aria-label="Mounting USB devices"><!--[--><!--]--> Mounting USB devices <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iobroker-docker-image/docs/#startup-scripts" class="router-link-active router-link-exact-active sidebar-item" aria-label="Startup scripts"><!--[--><!--]--> Startup scripts <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iobroker-docker-image/docs/#multihost" class="router-link-active router-link-exact-active sidebar-item" aria-label="Multihost"><!--[--><!--]--> Multihost <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iobroker-docker-image/docs/#redis" class="router-link-active router-link-exact-active sidebar-item" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/iobroker-docker-image/docs/#maintenance" class="router-link-active router-link-exact-active sidebar-item" aria-label="Maintenance"><!--[--><!--]--> Maintenance <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/iobroker-docker-image/docs/#backup" class="router-link-active router-link-exact-active sidebar-item" aria-label="Backup"><!--[--><!--]--> Backup <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iobroker-docker-image/docs/#restore" class="router-link-active router-link-exact-active sidebar-item" aria-label="Restore"><!--[--><!--]--> Restore <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iobroker-docker-image/docs/#updates-upgrades" class="router-link-active router-link-exact-active sidebar-item" aria-label="Updates &amp; Upgrades"><!--[--><!--]--> Updates &amp; Upgrades <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iobroker-docker-image/docs/#docker-healthcheck" class="router-link-active router-link-exact-active sidebar-item" aria-label="Docker Healthcheck"><!--[--><!--]--> Docker Healthcheck <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/iobroker-docker-image/docs/#best-practice" class="router-link-active router-link-exact-active sidebar-item" aria-label="Best practice"><!--[--><!--]--> Best practice <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/iobroker-docker-image/docs/#avoid-using-latest-tag" class="router-link-active router-link-exact-active sidebar-item" aria-label="Avoid using latest tag"><!--[--><!--]--> Avoid using latest tag <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iobroker-docker-image/docs/#use-maintenance-script" class="router-link-active router-link-exact-active sidebar-item" aria-label="Use maintenance script"><!--[--><!--]--> Use maintenance script <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iobroker-docker-image/docs/#migrating-to-redis" class="router-link-active router-link-exact-active sidebar-item" aria-label="Migrating to Redis"><!--[--><!--]--> Migrating to Redis <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/iobroker-docker-image/docs/#miscellaneous" class="router-link-active router-link-exact-active sidebar-item" aria-label="Miscellaneous"><!--[--><!--]--> Miscellaneous <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/iobroker-docker-image/docs/#beta-testing" class="router-link-active router-link-exact-active sidebar-item" aria-label="Beta testing"><!--[--><!--]--> Beta testing <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/iobroker-docker-image/docs/#notes-for-developers" class="router-link-active router-link-exact-active sidebar-item" aria-label="Notes for developers"><!--[--><!--]--> Notes for developers <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="iobroker-docker-image-docs" tabindex="-1"><a class="header-anchor" href="#iobroker-docker-image-docs" aria-hidden="true">#</a> ioBroker Docker Image Docs</h1><p>This is the official documentation for the ioBroker Docker image. It covers everything you need to set up and configure a ioBroker Docker container.</p><p>If you got questions on how to configure your ioBroker and its adapters please refer to the <a href="https://www.iobroker.net/#en/documentation" target="_blank" rel="noopener noreferrer">Official ioBroker Docs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h2 id="getting-started" tabindex="-1"><a class="header-anchor" href="#getting-started" aria-hidden="true">#</a> Getting Started</h2><p>For discussion and support please visit <a href="http://forum.iobroker.net/viewtopic.php?f=17&amp;t=5089" target="_blank" rel="noopener noreferrer">ioBroker forum thread<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> or join the ioBroker Community on <a href="https://discord.gg/kN7nhx6C" target="_blank" rel="noopener noreferrer">Discord<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, or <a href="https://www.facebook.com/groups/440499112958264" target="_blank" rel="noopener noreferrer">Facebook<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><p>Please do not contact me directly for any support-reasons. Every support question should be answered in a public place so all users can benefit from it . Thanks in advance.</p><p>If you think you found a bug or simply want to request a new feature please open an <a href="https://github.com/buanet/ioBroker.docker/issues" target="_blank" rel="noopener noreferrer">issue<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> on Github so we can talk about.</p><p>The following ways to set up an ioBroker container are only examples and may vary from platform to platform. Maybe you have to change, add or replace parameters to configure ioBroker for fitting your needs.</p><h3 id="running-from-command-line" tabindex="-1"><a class="header-anchor" href="#running-from-command-line" aria-hidden="true">#</a> Running from command-line</h3><p>For taking a first look at the iobroker docker container it would be enough to simply run the following basic docker run command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">8081</span>:8081 <span class="token parameter variable">--name</span> iobroker <span class="token parameter variable">-v</span> iobrokerdata:/opt/iobroker buanet/iobroker:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">Pro Tip</p><p>It is always a good choice to avoid using the &quot;latest&quot; tag for production. For more details see <a aria-current="page" href="/iobroker-docker-image/docs/#best-practice" class="router-link-active router-link-exact-active">&quot;Best practice&quot;</a>.</p></div><h3 id="running-with-docker-compose" tabindex="-1"><a class="header-anchor" href="#running-with-docker-compose" aria-hidden="true">#</a> Running with docker-compose</h3><p>You can also run iobroker by using docker-compose. Here is an example:</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;2&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">iobroker</span><span class="token punctuation">:</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">image</span><span class="token punctuation">:</span> buanet/iobroker<span class="token punctuation">:</span>latest
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> iobroker
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> iobroker
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;8081:8081&quot;</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> iobrokerdata<span class="token punctuation">:</span>/opt/iobroker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">Pro Tip</p><p>It is always a good choice to avoid using the &quot;latest&quot; tag for production. For more details see <a aria-current="page" href="/iobroker-docker-image/docs/#best-practice" class="router-link-active router-link-exact-active">&quot;Best practice&quot;</a>.</p></div><h2 id="persistent-data" tabindex="-1"><a class="header-anchor" href="#persistent-data" aria-hidden="true">#</a> Persistent data</h2><p>All configuration data of ioBroker is stored in <code>/opt/iobroker</code>. To make this data persistent it is recommended to mount an (empty) folder or Docker volume to <code>/opt/iobroker</code> during first startup of your container. Since ioBroker Docker image v8.0.0 Docker will create a default volume when you do not mount any folder or volume to <code>/opt/iobroker</code>.</p><div class="custom-container warning"><p class="custom-container-title">Note</p><p>If you use a shared storage oder external device mounted to your Docker host to store the iobroker folder make sure the mount point on your host does NOT have the <code>noexec</code> flag activated. Otherwise you will get problems executing ioBroker inside the container! For mor details please take a look at the corresponding <a href="https://github.com/buanet/ioBroker.docker/issues?q=is%3Aissue+noexec" target="_blank" rel="noopener noreferrer">Github issues<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p></div><h2 id="environment-variables-env" tabindex="-1"><a class="header-anchor" href="#environment-variables-env" aria-hidden="true">#</a> Environment variables (ENV)</h2><p>To configure your ioBroker container as you need, it is possible to set some ENVironment variables. Please only set variables you really need.<br>Variables you do not set and are marked as &quot;Set by default = yes&quot; in the following table, will be automatically set using their default values when your run a new container.</p><table><thead><tr><th>ENV</th><th>Set by<br>default</th><th>Default<br>Value</th><th>Description</th></tr></thead><tbody><tr><td>AVAHI</td><td>no</td><td>false</td><td>Activates avahi-daemon for supporting yahka-adapter, can be <code>true</code> or <code>false</code></td></tr><tr><td>DEBUG</td><td>no</td><td>false</td><td>Activates extended log output for your container, can be <code>true</code> or <code>false</code><br>(!!! Only set if you really need !!!)</td></tr><tr><td>IOB_ADMINPORT</td><td>no</td><td>8081</td><td>Sets ioBroker adminport on startup, must be a number</td></tr><tr><td>IOB_BACKITUP_EXTDB</td><td>no</td><td>false</td><td>Activates backing up external databases in ioBroker backitup adapter, can be <code>true</code> or <code>false</code> (!!! Make sure your have read <a href="#backup">this</a> !!!)</td></tr><tr><td>IOB_MULTIHOST</td><td>no</td><td>none</td><td>Sets ioBroker instance as <code>master</code> or <code>slave</code> for multihost support</td></tr><tr><td>IOB_OBJECTSDB_TYPE</td><td>no</td><td>jsonl</td><td>Sets type of ioBroker objects db, could be <code>jsonl</code>, <code>file</code> (deprecated) or <code>redis</code></td></tr><tr><td>IOB_OBJECTSDB_HOST</td><td>no</td><td>127.0.0.1</td><td>Sets host(s) for ioBroker objects db, can be a comma separated list when using Redis Sentinel</td></tr><tr><td>IOB_OBJECTSDB_PORT</td><td>no</td><td>9001</td><td>Sets port(s) for ioBroker objects db, can be a comma separated list when using Redis Sentinel</td></tr><tr><td>IOB_OBJECTSDB_PASS</td><td>no</td><td>none</td><td>Sets (optional) password for ioBroker objects db in Redis</td></tr><tr><td>IOB_OBJECTSDB_NAME</td><td>no</td><td>mymaster</td><td>Sets name of Redis Sentinel master</td></tr><tr><td>IOB_STATESDB_TYPE</td><td>no</td><td>jsonl</td><td>Sets type of ioBroker states db, could be <code>jsonl</code>, <code>file</code> (deprecated) or <code>redis</code></td></tr><tr><td>IOB_STATESDB_HOST</td><td>no</td><td>127.0.0.1</td><td>Sets host(s) for ioBroker states db, can be a comma separated list when using Redis Sentinel</td></tr><tr><td>IOB_STATESDB_PORT</td><td>no</td><td>9000</td><td>Sets port(s) for ioBroker states db, can be a comma separated list when using Redis Sentinel</td></tr><tr><td>IOB_STATESDB_PASS</td><td>no</td><td>none</td><td>Sets (optional) password for ioBroker states db in Redis</td></tr><tr><td>IOB_STATESDB_NAME</td><td>no</td><td>mymaster</td><td>Sets name of Redis Sentinel master</td></tr><tr><td>LANG</td><td>yes</td><td>de_DE.UTF‑8</td><td>The following locales are pre-generated: de_DE.UTF-8, en_US.UTF-8</td></tr><tr><td>LANGUAGE</td><td>yes</td><td>de_DE:de</td><td>The following locales are pre-generated: de_DE:de, en_US:en</td></tr><tr><td>LC_ALL</td><td>yes</td><td>de_DE.UTF-8</td><td>The following locales are pre-generated: de_DE.UTF-8, en_US.UTF-8</td></tr><tr><td>PACKAGES</td><td>no</td><td>none</td><td>Installs additional linux packages to your container, packages should be seperated by whitespace like this: <code>package1 package2 package3</code></td></tr><tr><td>PERMISSION_CHECK</td><td>no</td><td>true</td><td>Checks and corrects all relevant permissions on container startup, can be <code>true</code> or <code>false</code> (!!! Use at your own risk !!!)</td></tr><tr><td>SETGID</td><td>yes</td><td>1000</td><td>For some reasons it might be useful to specify the gid of the containers iobroker user to match an existing group on the docker host</td></tr><tr><td>SETUID</td><td>yes</td><td>1000</td><td>For some reasons it might be useful to specify the uid of the containers iobroker user to match an existing user on the docker host</td></tr><tr><td>TZ</td><td>yes</td><td>Europe/Berlin</td><td>Sets the containers timezone, all valid Linux-timezones are possible</td></tr><tr><td>USBDEVICES</td><td>no</td><td>none</td><td>Sets relevant permissions on mounted devices like <code>/dev/ttyACM0</code>, for more than one device separate with <code>;</code> like this: <code>/dev/ttyACM0;/dev/ttyACM1</code></td></tr><tr><td>ZWAVE</td><td>no</td><td>false</td><td>Installs openzwave to support zwave-adapter, can be <code>true</code> or <code>false</code></td></tr></tbody></table><h2 id="networks" tabindex="-1"><a class="header-anchor" href="#networks" aria-hidden="true">#</a> Networks</h2><p>The <a href="#running-from-command-line">examples</a> above have no specific networking configuration. In this case Docker is using its default bridge network. In general there are <a href="https://docs.docker.com/network/bridge/#differences-between-user-defined-bridges-and-the-default-bridge" target="_blank" rel="noopener noreferrer">some reasons<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> why it might be a better choice to use a user-defined bridge network.</p><p>Running ioBroker with a Docker bridge network works fine with most of the ioBroker adapters (make sure to map all ports your adapters need!), and may be perfect for taking a first look into ioBroker. But some ioBroker adapters are using techniques like <a href="https://en.wikipedia.org/wiki/Multicast" target="_blank" rel="noopener noreferrer">Multicast<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> or <a href="https://en.wikipedia.org/wiki/Broadcasting_(networking)" target="_blank" rel="noopener noreferrer">Broadcast<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> for automatic detection of IoT devices and other features. In this case it may be useful to switch your network to <a href="https://docs.docker.com/network/host/" target="_blank" rel="noopener noreferrer">host<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> or <a href="https://docs.docker.com/network/macvlan/" target="_blank" rel="noopener noreferrer">MACVLAN<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><p>For more information about networking with Docker please refer to the <a href="https://docs.docker.com/network/" target="_blank" rel="noopener noreferrer">official Docker docs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h2 id="advanced-configuration" tabindex="-1"><a class="header-anchor" href="#advanced-configuration" aria-hidden="true">#</a> Advanced configuration</h2><h3 id="mounting-usb-devices" tabindex="-1"><a class="header-anchor" href="#mounting-usb-devices" aria-hidden="true">#</a> Mounting USB devices</h3><p>If you want to use an USB device within ioBroker inside your container don´t forget to <a href="https://docs.docker.com/engine/reference/commandline/run/#add-host-device-to-container---device" target="_blank" rel="noopener noreferrer">mount the device<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> on container startup AND use the <a href="#environment-variables-env">ENV</a> <code>USBDEVICES</code> to give ioBroker access to it.</p><div class="custom-container warning"><p class="custom-container-title">Note</p><p>This is an AND condition. You have to do both. Just setting the <a href="#environment-variables-env">ENV</a> <code>USBDEVICES</code> will not work.</p></div><h3 id="startup-scripts" tabindex="-1"><a class="header-anchor" href="#startup-scripts" aria-hidden="true">#</a> Startup scripts</h3><p>It is possible to add some script code to container startup with the help of the userscripts feature. You can get this to work by mounting an additional folder or volume to <code>/opt/userscripts</code>.</p><p>When you mount an empty folder the startup script will restore two example scripts in there. To activate the scripts you have to remove the <code>_example</code> part of the filename. The <code>userscript_firststart.sh</code> will execute only at the very first start of a new container, while the <code>userscript_everystart.sh</code> will execute on every container start.</p><p>Feel free to test it with my example code. Take a look at the log. In <code>Step 4 of 5: Applying special settings</code> you will see the messages generated by the example userscripts.</p><h3 id="multihost" tabindex="-1"><a class="header-anchor" href="#multihost" aria-hidden="true">#</a> Multihost</h3><p>With the help of <a href="#environment-variables-env">ENV</a> <code>IOB_MULTIHOST</code> and the <a href="#environment-variables-env">ENVs</a> for objects and states db connections it is possible to run a container as standalone (default), multihost <code>master</code> or multihost <code>slave</code>. This is more or less a feature for advanced users. Please make sure you know how ioBroker multihost is working and what <code>ìobroker setup custom</code> does.</p><p>Further there is no need for executing <code>iobroker multihost enable</code> or <code>iobroker multihost connect</code> inside the container. Just configure the mentioned <a href="#environment-variables-env">ENVs</a>. The startup script will do all the magic.</p><p>For general information about iobroker multihost feature please see <a href="https://www.iobroker.net/docu/index-24.htm?page_id=3068&amp;lang=de" target="_blank" rel="noopener noreferrer">Official ioBroker Docs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h3 id="redis" tabindex="-1"><a class="header-anchor" href="#redis" aria-hidden="true">#</a> Redis</h3><p>In ioBroker Docker Image v8.0.0 the implementation of using Redis as objects and/ or states db was completely rebuild. In general the configuration is still done by setting the <a href="#environment-variables-env">ENVs</a> for db <code>TYPE</code>, <code>HOST</code> and <code>PORT</code>. But there are some more Features available now.</p><p>For some basic information about using Redis with ioBroker please see this <a href="https://forum.iobroker.net/topic/26327/redis-in-iobroker-%C3%BCberblick" target="_blank" rel="noopener noreferrer">ioBroker Forum Post by apollon77<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h4 id="authentification" tabindex="-1"><a class="header-anchor" href="#authentification" aria-hidden="true">#</a> Authentification</h4><p>With the <a href="#environment-variables-env">ENVs</a> <code>IOB_OBJECTSDB_PASS</code>and <code>IOB_STATESDB_PASS</code> it is possible to use a password authentication when connecting to a Redis db. To make this work authentication must be also enabled in <code>redis.conf</code>.</p><h4 id="redis-sentinel-cluster" tabindex="-1"><a class="header-anchor" href="#redis-sentinel-cluster" aria-hidden="true">#</a> Redis Sentinel Cluster</h4><p>It is now also possible to use a Redis Sentinel cluster as objects/ states db in ioBroker. This feature will be automatically configured when you set a comma separated list of <code>IOB_OBJECTSDB_HOST</code>and/or <code>IOB_STATESDB_HOST</code>. If you want to use different ports for your Redis Sentinel nodes, you are also able so use a comma separated list in <code>IOB_OBJECTSDB_PORT</code>and/or <code>IOB_STATESDB_PORT</code>.<br> The use of <a href="#environment-variables-env">ENVs</a> for <code>IOB_OBJECTSDB_NAME</code> and <code>IOB_STATESDB_NAME</code> is optional. If nothing is set, ioBroker will use the Redis default <code>mymaster</code> as name for Redis Sentinel master db.</p><h2 id="maintenance" tabindex="-1"><a class="header-anchor" href="#maintenance" aria-hidden="true">#</a> Maintenance</h2><h3 id="backup" tabindex="-1"><a class="header-anchor" href="#backup" aria-hidden="true">#</a> Backup</h3><p>The easiest way to backup your ioBroker config is to use the builtin <a href="https://www.iobroker.net/docu/index-98.htm?page_id=3971&amp;lang=de#iobroker_backup" target="_blank" rel="noopener noreferrer"><code>iobroker backup</code> command<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> or the <a href="https://github.com/simatec/ioBroker.backitup/blob/master/docs/de/backitup.md" target="_blank" rel="noopener noreferrer">iobroker.backitup adapter<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><p>Another option is to simply tar or copy the whole directory you mounted into your ioBroker container on the Docker host. Make sure ioBroker container is stopped when backing up the directory.</p><div class="custom-container warning"><p class="custom-container-title">Note</p><p>When copying the ioBroker directory, always take care of preserving the correct permissions.</p></div><h4 id="backup-remote-databases-with-iobroker-backitup-in-docker" tabindex="-1"><a class="header-anchor" href="#backup-remote-databases-with-iobroker-backitup-in-docker" aria-hidden="true">#</a> Backup remote databases with iobroker.backitup in Docker</h4><p>There are some limitations in backing up remote databases (Redis, InfluxDB, PostgresSQL, MySQL) with iobroker.backitup adapter when running inside a Docker container. <a href="/projects/iobroker-docker-image/docs_backitup.html" class="">This small guide</a> will help you to understand why options are grayed out by default and how to change it.</p><h3 id="restore" tabindex="-1"><a class="header-anchor" href="#restore" aria-hidden="true">#</a> Restore</h3><p>Restoring your Data can be done by using the builtin <a href="https://www.iobroker.net/docu/index-98.htm?page_id=3971&amp;lang=de#iobroker_backup" target="_blank" rel="noopener noreferrer"><code>iobroker restore</code> command<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> or the <a href="https://github.com/simatec/ioBroker.backitup/blob/master/docs/de/backitup.md" target="_blank" rel="noopener noreferrer">iobroker.backitup adapter<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> as described at the <a href="https://www.iobroker.net/#en/documentation" target="_blank" rel="noopener noreferrer">Official ioBroker Docs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h3 id="updates-upgrades" tabindex="-1"><a class="header-anchor" href="#updates-upgrades" aria-hidden="true">#</a> Updates &amp; Upgrades</h3><div class="custom-container danger"><p class="custom-container-title">WARNING</p><p>Be sure to have a valid backup of your ioBroker installation before applying any updates!</p></div><h4 id="linux-system-package-updates" tabindex="-1"><a class="header-anchor" href="#linux-system-package-updates" aria-hidden="true">#</a> Linux system (package) updates</h4><p>These updates are usually coming through the systems package manager. In case of the ioBroker Docker container it is <code>apt</code>. So you will be able to install these updates using the command line of your container.</p><p>But the easiest way is always pulling the newest image and/ or simply recreate your container.</p><h4 id="iobroker-adapter-updates" tabindex="-1"><a class="header-anchor" href="#iobroker-adapter-updates" aria-hidden="true">#</a> ioBroker Adapter updates</h4><p>You will be notified about available adapter updates in the ioBroker admin interface. You can find an option to install it there too. See <a href="https://www.iobroker.net/#en/documentation" target="_blank" rel="noopener noreferrer">Official ioBroker Docs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> for details.</p><h4 id="iobroker-js-controller-core-updates" tabindex="-1"><a class="header-anchor" href="#iobroker-js-controller-core-updates" aria-hidden="true">#</a> ioBroker js-controller (core) updates</h4><p>You will be notified about js-controller updates in the ioBroker admin interface. As ioBroker has to be stopped to apply these updates it is not able to install it from the admin interface. You have to do it manually on the containers command line.</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">pkill</span> <span class="token parameter variable">-u</span> iobroker
iobroker update
iobroker upgrade self
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>After this you have to restart your container.</p><div class="custom-container tip"><p class="custom-container-title">Pro Tip</p><p>To easily apply js-controller updates you can also use the built in maintenance script. This is recommended if you have some kind of watchdog monitoring your containers health status. For more details on how to use the script see <a aria-current="page" href="/iobroker-docker-image/docs/#best-practice" class="router-link-active router-link-exact-active">Best practice</a>.</p></div><h4 id="upgrades" tabindex="-1"><a class="header-anchor" href="#upgrades" aria-hidden="true">#</a> Upgrades</h4><p>When bringing your ioBroker to an new major version of the ioBroker Docker Image (e.g. from v7.x.x to v8.x.x) you are going to perform an upgrade. While updates should normally have no impact to the function of your ioBroker, upgrades might include some &quot;breaking changes&quot; and the need of performing some additional steps.<br> So if you are planning to upgrade your Docker Container to a new major version make sure you checked the <a href="https://github.com/buanet/ioBroker.docker/releases/latest" target="_blank" rel="noopener noreferrer">release notes<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> of the latest release first.</p><div class="custom-container danger"><p class="custom-container-title">WARNING</p><p>Make sure to have a valid backup of your ioBroker installation and your js-controller is up to date before performing an upgrade!</p></div><p>In general it is possible to upgrade to a new major version of the ioBroker Docker image by simply recreating your container from the new ioBroker Docker image as you do it in the normal update process. In most cases the js-controller will detect the new node version and tries to fix adapters which having problems with the change. But in some rare cases the &quot;recompiling&quot; will fail and you got some additional steps to do like rebuilding or simply reinstalling the adapter. In case you have a valid backup, you should simply give it a try.</p><p>In case the above don&#39;t work, or you simply want to void the described problems it is always a smooth option to use the backup and restore procedure whenever switching an existing ioBroker Docker installation to a new major version of the ioBroker Docker image.</p><p>So your upgrade might be done like this, for example:</p><ol><li>Create a new ioBroker Backup</li><li>Create a new and empty folder for your ioBroker data</li><li>Copy the latest backup file from the old ioBroker data folder to the new one</li><li>Stop and delete your old container</li><li>Create a new ioBroker Docker container from the latest ioBroker image with the same config, but mount the new ioBroker data folder</li><li>Take a look at the container logs while the container is starting</li><li>Restore the backup file from command line or with the help of iobroker.backitup adapter</li><li>Watch progress of reinstalling your adapters at the iobroker log</li></ol><h3 id="docker-healthcheck" tabindex="-1"><a class="header-anchor" href="#docker-healthcheck" aria-hidden="true">#</a> Docker Healthcheck</h3><p>Since v5.1.0 the image contains a Docker healthcheck. It simply checks if js-controller is running inside the container and reports the container as <code>healthy</code> or <code>unhealthy</code> to the Docker daemon.</p><p>The healthcheck itself is configured to 5 retries in an 15s interval with a timeout of 5s. So a container needs a minimum of one minute to get unhealthy after the js-controller was killed.</p><div class="custom-container tip"><p class="custom-container-title">Pro Tip</p><p>As the Docker daemon itself gives no opportunity to automatically restart an unhealthy container you might want to setup some kind of &quot;watchdog container&quot;. Check out <a href="https://github.com/buanet/docker-watchdog" target="_blank" rel="noopener noreferrer">this one<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> I build some time ago.</p></div><h2 id="best-practice" tabindex="-1"><a class="header-anchor" href="#best-practice" aria-hidden="true">#</a> Best practice</h2><h3 id="avoid-using-latest-tag" tabindex="-1"><a class="header-anchor" href="#avoid-using-latest-tag" aria-hidden="true">#</a> Avoid using latest tag</h3><p>The Docker tag <code>latest</code> (buanet/iobroker:latest) will always pull the latest available version of the ioBroker Docker image. This might cause some trouble when it switches to a new major version of the Docker image and performing an <a href="#updates-upgrades">upgrade</a> of your ioBroker. To avoid this you always should use a single version tag (e.g. buanet/iobroker:v7.2.0) or the major versions latest tag (e.g. buanet/iobroker:latest-v7) when creating an ioBroker Docker container for production.</p><h3 id="use-maintenance-script" tabindex="-1"><a class="header-anchor" href="#use-maintenance-script" aria-hidden="true">#</a> Use maintenance script</h3><p>The ioBrocker Docker image includes a small maintenance script which helps you to manage your ioBroker Docker container. For example you can use this script to set your container into maintenance mode (stops ioBroker but keeps container healthy) and apply js-controller updates. Simply type <code>maintenance --help</code> at the containers command line to see what the script can do for you.</p><h3 id="migrating-to-redis" tabindex="-1"><a class="header-anchor" href="#migrating-to-redis" aria-hidden="true">#</a> Migrating to Redis</h3><p>If you want to migrate an existing ioBroker installation to Redis as objects and/ or states db, it is recommended to do the migration first from inside the container before setting the needed <a href="#environment-variables-env">ENVs</a> to the container. This could be done by running <code>iobroker setup custom</code> at the containers command line. The wizard will guide you through the process and also asks for the migration of existing objects and/ or states. For more details on how to configure ioBroker to connect to Redis, please refer to the <a href="https://www.iobroker.net/#en/documentation" target="_blank" rel="noopener noreferrer">Official ioBroker Docs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><div class="custom-container warning"><p class="custom-container-title">NOTE</p><p>For running <code>iob setup custom</code> ioBroker has to be stopped inside the container. It is recommended to use the <a href="#use-maintenance-script">maintenance script</a> to set the container in maintenance mode and stop iobroker gracefully.</p></div><h2 id="miscellaneous" tabindex="-1"><a class="header-anchor" href="#miscellaneous" aria-hidden="true">#</a> Miscellaneous</h2><h3 id="beta-testing" tabindex="-1"><a class="header-anchor" href="#beta-testing" aria-hidden="true">#</a> Beta testing</h3><p>If you want to get the newest features and fixes feel free to use/ test the beta version of the Docker image. For more information take a look at the <a href="https://github.com/buanet/ioBroker.docker/releases" target="_blank" rel="noopener noreferrer">Docker image releases<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> and/ or join our discussion on <a href="https://discord.gg/kN7nhx6C" target="_blank" rel="noopener noreferrer">ioBroker Discord &gt; Beta Testing &amp; Feedback &gt; docker-image<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.<br>Thank you.</p><h3 id="notes-for-developers" tabindex="-1"><a class="header-anchor" href="#notes-for-developers" aria-hidden="true">#</a> Notes for developers</h3><h4 id="detecting-docker-environment" tabindex="-1"><a class="header-anchor" href="#detecting-docker-environment" aria-hidden="true">#</a> Detecting Docker environment</h4><p>For adapter developers it is now possible to easily detect if ioBroker is running inside the official docker container. Please simply check if the file <code>/opt/scripts/.docker_config/.thisisdocker</code> exists. The content of the file will always tell the image version.</p><hr><h4 id="work-in-progress" tabindex="-1"><a class="header-anchor" href="#work-in-progress" aria-hidden="true">#</a> ⚠️ Work In Progress ⚠️</h4><p>This documentation is still work in progress. If you got any improvements simply let me know by opening an <a href="https://github.com/buanet/docs/issues" target="_blank" rel="noopener noreferrer">issue<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> or <a href="https://github.com/buanet/docs/blob/main/docs/projects/iobroker-docker-image/docs.md" target="_blank" rel="noopener noreferrer">edit it<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> by yourself and create a pull request.</p><p>If you got any unanswered questions please join the ioBroker community on <a href="https://discord.gg/kN7nhx6C" target="_blank" rel="noopener noreferrer">Discord<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, <a href="https://www.facebook.com/groups/440499112958264" target="_blank" rel="noopener noreferrer">Facebook<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> or <a href="https://forum.iobroker.net" target="_blank" rel="noopener noreferrer">ioBroker Forum<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.b4a1b2d2.js" defer></script>
  </body>
</html>
